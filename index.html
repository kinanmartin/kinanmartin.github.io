<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      // Tailwind config for dark mode
      tailwind.config = {
        darkMode: "class",
      };
    </script>
    <link rel="icon" href="favicon.ico" />
    <script
      src="https://kit.fontawesome.com/05d09269ad.js"
      crossorigin="anonymous"
    ></script>
    <!-- Twemoji for consistent flag rendering across all platforms -->
    <script
      src="https://cdn.jsdelivr.net/npm/@twemoji/api@latest/dist/twemoji.min.js"
      crossorigin="anonymous"
    ></script>
    <title>Kinan Martin</title>
    <style>
      /* Custom animations and special styles that Tailwind doesn't cover */
      @keyframes caret {
        50% {
          opacity: 0;
        }
      }

      @keyframes slideBackground {
        0% {
          transform: translateX(0%);
        }
        100% {
          transform: translateX(-1800px);
        }
      }

      .animate-caret {
        animation: caret 1s steps(1) infinite;
      }

      .animate-slide-bg {
        animation: slideBackground 20s linear 0s infinite;
      }

      /* Caret cursor styles using pseudo-element */
      #hello {
        position: relative;
        padding-right: 0.15em;
      }

      #hello::after {
        content: "";
        position: absolute;
        right: 0;
        top: -0.05em;
        height: 1.1em;
        width: 0.1em;
        background-color: currentColor;
        animation: caret 1s steps(1) infinite;
      }

      /* RTL support for hello animation */
      #hello.rtl-text {
        direction: rtl;
        padding-right: 0;
        padding-left: 0.15em;
      }

      #hello.rtl-text::after {
        right: auto;
        left: 0;
      }

      /* Twemoji styles for consistent emoji display */
      img.emoji {
        height: 0.95em;
        width: 0.95em;
        margin: 0 0.05em 0 0.1em;
        vertical-align: -0.1em;
        display: inline-block;
      }

      /* Larger emojis for language cards */
      .language-flag img.emoji {
        height: 3rem !important;
        width: 3rem !important;
        margin: 0 auto 0.5rem auto !important;
      }

      @media (min-width: 768px) {
        .language-flag img.emoji {
          height: 3.5rem !important;
          width: 3.5rem !important;
        }
      }

      @media (min-width: 1024px) {
        .language-flag img.emoji {
          height: 4rem !important;
          width: 4rem !important;
        }
      }

      /* Navigation menu styles */
      #nav-links {
        display: none;
      }

      #nav-links.show-desktop {
        display: flex;
      }

      #mobile-menu {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease-out;
      }

      #mobile-menu.show-mobile {
        max-height: 400px;
        transition: max-height 0.3s ease-in;
      }

      /* Smooth transitions for dark mode */
      * {
        transition:
          background-color 0.2s ease,
          border-color 0.2s ease;
      }
    </style>
    <script>
      // Dark mode initialization script (runs before page load to prevent flash)
      (function () {
        const savedTheme = localStorage.getItem("theme");
        if (savedTheme === "dark") {
          document.documentElement.classList.add("dark");
        } else if (savedTheme === "light") {
          document.documentElement.classList.remove("dark");
        } else {
          // No saved preference, use system preference
          if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
            document.documentElement.classList.add("dark");
          }
        }
      })();
    </script>
  </head>
  <body
    class="font-sans text-gray-800 dark:text-gray-200 leading-relaxed bg-gray-100 dark:bg-gray-900"
  >
    <!-- Navigation -->
    <nav
      id="navigation"
      class="bg-gray-900 dark:bg-gray-950 text-white py-3 md:py-4 sticky top-0 z-50 shadow-lg"
    >
      <div class="container mx-auto px-4 md:px-6 max-w-6xl">
        <!-- Main nav bar -->
        <div class="flex justify-between items-center">
          <!-- Left: Name link and navigation links -->
          <div class="flex items-center gap-6">
            <a
              href=""
              class="text-white font-bold hover:text-blue-300 transition-colors text-xl md:text-xl"
            >
              Kinan Martin
            </a>
            <ul
              id="nav-links"
              class="hidden md:flex list-none flex-wrap items-center gap-6 text-sm md:text-base"
            ></ul>
          </div>

          <!-- Right: Theme toggle and hamburger -->
          <div class="flex items-center gap-2">
            <button
              id="theme-toggle"
              class="text-white hover:text-blue-300 transition-colors p-2 rounded-lg hover:bg-gray-800 dark:hover:bg-gray-700 w-10 h-10"
            >
              <i class="fa-solid ${themeManager.getIcon()}"></i>
            </button>
            <button
              id="menu-toggle"
              class="text-white hover:text-blue-300 transition-colors p-2 rounded-lg hover:bg-gray-800 dark:hover:bg-gray-700 w-10 h-10"
            >
              <i class="fa-solid fa-bars"></i>
            </button>
          </div>
        </div>

        <!-- Mobile menu (shown below navbar on mobile when menu is open) -->
        <div id="mobile-menu" class="md:hidden">
          <ul class="list-none pt-4 space-y-2"></ul>
        </div>
      </div>
    </nav>

    <!-- Main Content Container -->
    <div class="container mx-auto px-4 md:px-6 max-w-6xl">
      <!-- Introduction Section -->
      <section
        id="introduction"
        class="bg-white dark:bg-gray-800 mt-6 md:mt-8 rounded-lg shadow-md dark:shadow-xl p-6 md:p-8"
      >
        <div class="flex flex-col md:flex-row gap-6 md:gap-8">
          <!-- Profile - Full width on mobile, fixed width on desktop -->
          <div id="profile" class="text-center md:w-72">
            <img
              src="img/headshot.jpeg"
              alt="Me in Howth, Ireland"
              class="w-48 md:w-full mx-auto rounded-lg shadow-lg mb-4"
            />
            <h2 id="name" class="text-2xl md:text-3xl font-bold mb-2">
              Kinan Martin
            </h2>
            <p class="mb-3 text-sm md:text-base">
              <code
                class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-xs md:text-sm"
              >
                kinanmartin0 _ gmail _ com
              </code>
            </p>
            <div
              id="social-links"
              class="flex justify-center gap-4 text-xl md:text-2xl"
            ></div>
          </div>

          <!-- About Me - Full width on mobile, flexible on desktop -->
          <div id="about_me" class="flex-1">
            <h1
              id="hello"
              class="text-3xl md:text-5xl lg:text-6xl font-bold mb-4 md:mb-6 h-12 md:h-20 inline-block dark:text-white"
            ></h1>
            <div
              id="about-content"
              class="space-y-3 md:space-y-4 text-base md:text-lg"
            ></div>
          </div>
        </div>
      </section>

      <!-- News Section -->
      <section id="news" class="mt-6 md:mt-8">
        <div
          class="bg-white dark:bg-gray-800 rounded-lg shadow-md dark:shadow-xl p-6 md:p-8"
        >
          <h2 class="text-2xl md:text-3xl font-bold text-center mb-6 md:mb-8">
            News
          </h2>
          <div
            class="bg-gray-50 dark:bg-gray-700 border-l-4 border-blue-600 dark:border-blue-400 rounded-lg p-4 md:p-6"
          >
            <ul
              id="news-list"
              class="space-y-4 md:space-y-6 text-sm md:text-base"
            ></ul>
          </div>
        </div>
      </section>

      <!-- Publications Section -->
      <section id="publications" class="mt-6 md:mt-8">
        <div
          class="bg-white dark:bg-gray-800 rounded-lg shadow-md dark:shadow-xl p-6 md:p-8"
        >
          <h2 class="text-2xl md:text-3xl font-bold text-center mb-6 md:mb-8">
            Publications
          </h2>
          <ul id="papers" class="space-y-3 md:space-y-4"></ul>
        </div>
      </section>

      <!-- Resume Section -->
      <section id="resume" class="mt-6 md:mt-8">
        <div
          class="bg-white dark:bg-gray-800 rounded-lg shadow-md dark:shadow-xl p-6 md:p-8"
        >
          <h2 class="text-2xl md:text-3xl font-bold text-center mb-6 md:mb-8">
            Resume
          </h2>
          <div class="flex justify-center">
            <a
              href="files/Kinan_Martin_Resume.pdf"
              target="_blank"
              class="block bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition-all duration-300 rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 p-6 md:p-8"
            >
              <div
                class="bg-gradient-to-r from-blue-500 to-purple-600 dark:from-blue-600 dark:to-purple-700 text-white rounded-lg p-4 md:p-6 text-center"
              >
                <i
                  class="fa-solid fa-file-pdf text-4xl md:text-6xl mb-3 md:mb-4"
                ></i>
                <p class="text-lg md:text-xl font-semibold">
                  View Resume (PDF)
                </p>
              </div>
            </a>
          </div>
        </div>
      </section>

      <!-- Languages Section -->
      <section id="languages" class="mt-6 md:mt-8">
        <div
          class="bg-white dark:bg-gray-800 rounded-lg shadow-md dark:shadow-xl p-6 md:p-8"
        >
          <h2 class="text-2xl md:text-3xl font-bold text-center mb-6 md:mb-8">
            Languages
          </h2>
          <div
            id="language-container"
            class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-4"
          ></div>
        </div>
      </section>

      <!-- YouTube Section -->
      <section id="youtube" class="mt-6 md:mt-8 mb-6 md:mb-8">
        <div
          class="bg-white dark:bg-gray-800 rounded-lg shadow-md dark:shadow-xl p-8 md:p-12 relative overflow-hidden"
        >
          <div class="absolute inset-0 opacity-20 dark:opacity-10">
            <div
              class="animate-slide-bg"
              style="
                width: 3600px;
                height: 100%;
                background: url(img/world_flags.png) repeat-x;
              "
            ></div>
          </div>
          <div class="relative z-10">
            <h2 class="text-2xl md:text-3xl font-bold text-center mb-6 md:mb-8">
              YouTube
            </h2>
            <div class="text-center">
              <a
                class="inline-block bg-gray-800 dark:bg-gray-900 bg-opacity-70 dark:bg-opacity-90 border-4 border-gray-300 dark:border-gray-600 text-white px-6 md:px-8 py-3 md:py-4 text-xl md:text-2xl rounded-lg hover:bg-opacity-90 dark:hover:bg-opacity-100 transition-all duration-300"
              >
                Coming soon!
              </a>
            </div>
          </div>
        </div>
      </section>
    </div>

    <script>
      // ==================== DARK MODE MANAGEMENT ====================

      class ThemeManager {
        constructor() {
          // Check if user has a saved preference, otherwise use system preference
          const savedTheme = localStorage.getItem("theme");
          if (savedTheme) {
            this.isDark = savedTheme === "dark";
          } else {
            // Use system preference for first-time visitors
            this.isDark = window.matchMedia(
              "(prefers-color-scheme: dark)",
            ).matches;
          }
          this.applyTheme();
        }

        applyTheme() {
          if (this.isDark) {
            document.documentElement.classList.add("dark");
          } else {
            document.documentElement.classList.remove("dark");
          }
        }

        toggle() {
          this.isDark = !this.isDark;
          localStorage.setItem("theme", this.isDark ? "dark" : "light");
          this.applyTheme();
          this.updateToggleButton();
        }

        updateToggleButton() {
          const button = document.getElementById("theme-toggle");
          if (button) {
            const icon = button.querySelector("i");
            icon.className = `fa-solid ${this.getIcon()}`;
          }
        }

        getIcon() {
          return this.isDark ? "fa-moon" : "fa-sun";
        }
      }

      const themeManager = new ThemeManager();

      // ==================== DATA STORES ====================

      const navigationItems = [
        { href: "#news", text: "News" },
        { href: "#publications", text: "Publications" },
        {
          href: "files/Kinan_Martin_Resume.pdf",
          text: "Resume",
          target: "_blank",
        },
        { href: "#languages", text: "Languages" },
        { href: "#youtube", text: "YouTube" },
      ];

      const socialLinks = [
        {
          href: "https://www.linkedin.com/in/kinan-martin-89900b208/",
          icon: "fa-brands fa-linkedin-in",
          label: "LinkedIn",
        },
        {
          href: "https://scholar.google.com/citations?user=XRTlOoMAAAAJ&hl=en",
          icon: "fa-solid fa-graduation-cap",
          label: "Google Scholar",
        },
        {
          href: "https://github.com/kinanmartin",
          icon: "fa-brands fa-github",
          label: "GitHub",
        },
        {
          href: "https://www.instagram.com/kinan_martin/",
          icon: "fa-brands fa-instagram",
          label: "Instagram",
        },
      ];

      const aboutParagraphs = [
        `I'm <strong>Kinan Martin</strong>. I'm an Applied AI Research Engineer at 
        <a href="https://reazon.jp" class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 underline">Reazon Holdings</a>
        --
        <a href="https://research.reazon.jp/index.html" class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 underline">
          Human Interaction Laboratory
        </a>
        in Tokyo, Japan.`,

        `I have experience researching, developing, implementing, and deploying a variety
        of natural language processing (NLP) models, including large language models (LLMs), 
        automatic speech recognition (ASR) models, multi-modal LLMs, and
        vision-language-action (VLA) models.`,

        `I've applied these models to a wide range of use cases, including
        psycholinguistic, clinical, commercial, and robotics applications.`,

        `Before coming to Japan, I got my Bachelor and Master of Engineering of Computer and Cognitive
        Sciences at 
        <a href="https://www.mit.edu" class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 underline">MIT</a> 
        (Course 6-9 MEng), where I worked at the
        <a href="http://cpl.mit.edu" class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 underline">Computational Psycholinguistics Lab</a>
        under
        <a href="https://www.mit.edu/~rplevy/index.html" class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 underline">Roger Levy</a>
        on probing text and speech based large language models
        for natural language understanding.`,

        `I love learning languages. Currently I speak
        <a href="#languages" class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 underline">10 languages</a>
        at different levels of fluency, and I'm always learning more!`,
      ];

      const newsItems = [
        {
          date: "2024/06",
          content: `Started work at <a href="https://reazon.jp" class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 underline">Reazon Holdings</a>
          -- <a href="https://research.reazon.jp/index.html" class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 underline">Human Interaction Laboratory</a>
          as an Applied AI Research Engineer in Tokyo, Japan 🇯🇵`,
        },
        {
          date: "2024/05",
          content:
            "Graduated with Master of Science in Computation and Cognition from MIT! 🎓🎓🎉🎉",
        },
        {
          date: "2024/01",
          content: `Teaching Python and web dev through
          <a href="https://misti.mit.edu/mit-arab-world" class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 underline">MIT-Arab World Global Teaching Labs</a>
          at <a href="https://injaz.org.jo" class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 underline">INJAZ</a> in Amman, Jordan 🇯🇴`,
        },
        {
          date: "2023/09",
          content:
            "Began Master of Engineering in Computation in Cognition at MIT 🙏",
        },
        {
          date: "2023/08",
          content: `Presented <a href="https://arxiv.org/abs/2306.06232" target="_blank" class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 underline">paper</a>
          on probing self-supervised speech models at
          <a href="https://interspeech2023.org" class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 underline">INTERSPEECH 2023</a> in Dublin, Ireland 🇮🇪`,
        },
        {
          date: "2023/06-08",
          content: `Interned at <a href="https://www.hh-ri.com/ai/" class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 underline">
          Foxconn: Hon Hai Research Institute in the Artificial Intelligence Department (鴻海研究院人工智慧所)</a> in Taipei, Taiwan 🇹🇼`,
        },
        {
          date: "2023/05",
          content:
            "Graduated with Bachelor of Science in Computation and Cognition from MIT! 🎓🎉",
        },
      ];

      const publications = [
        {
          title:
            "Probing self-supervised speech models for phonetic and phonemic information: a case study in aspiration",
          authors: [
            "Kinan Martin",
            "Jon Gauthier",
            "Canaan Breiss",
            "Roger Levy",
          ],
          date: "August 2023",
          publisher: "INTERSPEECH 2023",
          link: "https://arxiv.org/abs/2306.06232",
        },
        {
          title:
            "PLN CMM at SocialDisNER: Improving Detection of Disease Mentions in Tweets by Using Document-Level Features",
          authors: [
            "Matías Rojas",
            "Jose Barros",
            "Kinan Martin",
            "Mauricio Araneda-Hernandez",
            "Jocelyn Dunstan",
          ],
          date: "October 2022",
          publisher: "Association for Computational Linguistics",
          link: "https://aclanthology.org/2022.smm4h-1.15/",
        },
        {
          title:
            "Training and intrinsic evaluation of lightweight word embeddings for the clinical domain in Spanish",
          authors: [
            "Carolina Chiu",
            "Fabián Villena",
            "Kinan Martin",
            "Fredy Núñez",
            "Cecilia Besa",
            "Jocelyn Dunstan",
          ],
          date: "September 2022",
          publisher: "Frontiers",
          link: "https://www.frontiersin.org/articles/10.3389/frai.2022.970517/full",
        },
        {
          title:
            "Poor writing, not specialized concepts, drives processing difficulty in legal language",
          authors: ["Eric Martínez", "Francis Mollica", "Edward Gibson"],
          date: "July 2022",
          publisher: "Cognition",
          link: "https://www.sciencedirect.com/science/article/pii/S0010027722000580",
        },
      ];

      const languagesData = [
        { flag: "🇺🇸", native: "English", english: "English", level: "Native" },
        {
          flag: "🇯🇵",
          native: "日本語",
          english: "Japanese",
          level: "Proficient",
        },
        {
          flag: "🇫🇷",
          native: "Français",
          english: "French",
          level: "Proficient",
        },
        {
          flag: "🇷🇺",
          native: "Русский",
          english: "Russian",
          level: "Proficient",
        },
        { flag: "🇨🇳", native: "中文", english: "Chinese", level: "Proficient" },
        { flag: "🇸🇾", native: "العربية", english: "Arabic", level: "Heritage" },
        {
          flag: "🇪🇸",
          native: "Español",
          english: "Spanish",
          level: "Intermediate",
        },
        {
          flag: "🇵🇱",
          native: "Polski",
          english: "Polish",
          level: "Elementary",
        },
        {
          flag: "🇰🇷",
          native: "한국어",
          english: "Korean",
          level: "Elementary",
        },
        {
          flag: "🇻🇳",
          native: "Tiếng Việt",
          english: "Vietnamese",
          level: "Elementary",
        },
      ];

      // ==================== COMPONENT GENERATORS ====================

      // Navigation Component
      function renderNavigation() {
        const desktopNav = document.getElementById("nav-links");
        const mobileNav = document.querySelector("#mobile-menu ul");
        const themeToggle = document.getElementById("theme-toggle");
        const menuToggle = document.getElementById("menu-toggle");

        // Update theme toggle icon
        const themeIcon = themeToggle.querySelector("i");
        themeIcon.className = `fa-solid ${themeManager.getIcon()}`;

        // Populate both desktop and mobile nav items
        navigationItems.forEach((item) => {
          // Desktop nav item
          const desktopLi = document.createElement("li");
          const desktopA = document.createElement("a");
          desktopA.href = item.href;
          desktopA.className =
            "text-white font-bold hover:text-blue-300 transition-colors";
          desktopA.textContent = item.text;
          if (item.target) desktopA.target = item.target;
          desktopLi.appendChild(desktopA);
          desktopNav.appendChild(desktopLi);

          // Mobile nav item
          const mobileLi = document.createElement("li");
          const mobileA = document.createElement("a");
          mobileA.href = item.href;
          mobileA.className =
            "block text-white font-bold hover:text-blue-300 transition-colors py-2 px-4 hover:bg-gray-800 dark:hover:bg-gray-700 rounded";
          mobileA.textContent = item.text;
          if (item.target) mobileA.target = item.target;
          mobileLi.appendChild(mobileA);
          mobileNav.appendChild(mobileLi);
        });

        // Setup theme toggle
        themeToggle.addEventListener("click", () => {
          themeManager.toggle();
          const icon = themeToggle.querySelector("i");
          icon.className = `fa-solid ${themeManager.getIcon()}`;
        });

        // Setup menu toggle
        let menuOpen = false;
        menuToggle.addEventListener("click", () => {
          menuOpen = !menuOpen;
          const icon = menuToggle.querySelector("i");
          const mobileMenu = document.getElementById("mobile-menu");

          if (menuOpen) {
            // Check if mobile or desktop
            if (window.innerWidth >= 768) {
              // Desktop: show links in navbar
              desktopNav.classList.add("show-desktop");
            } else {
              // Mobile: show dropdown menu
              mobileMenu.classList.add("show-mobile");
            }
            icon.className = "fa-solid fa-times";
          } else {
            // Hide menus
            desktopNav.classList.remove("show-desktop");
            mobileMenu.classList.remove("show-mobile");
            icon.className = "fa-solid fa-bars";
          }
        });

        // Handle window resize
        let lastWidth = window.innerWidth;
        window.addEventListener("resize", () => {
          const currentWidth = window.innerWidth;
          const mobileMenu = document.getElementById("mobile-menu");

          // If crossing the mobile/desktop boundary
          if (
            (lastWidth < 768 && currentWidth >= 768) ||
            (lastWidth >= 768 && currentWidth < 768)
          ) {
            // Reset menu state when switching between mobile and desktop
            if (menuOpen) {
              if (currentWidth >= 768) {
                // Switching to desktop
                mobileMenu.classList.remove("show-mobile");
                desktopNav.classList.add("show-desktop");
              } else {
                // Switching to mobile
                desktopNav.classList.remove("show-desktop");
                mobileMenu.classList.add("show-mobile");
              }
            }
          }
          lastWidth = currentWidth;
        });

        // Close mobile menu when clicking a link
        mobileNav.querySelectorAll("a").forEach((link) => {
          link.addEventListener("click", () => {
            if (window.innerWidth < 768) {
              menuOpen = false;
              document
                .getElementById("mobile-menu")
                .classList.remove("show-mobile");
              menuToggle.querySelector("i").className = "fa-solid fa-bars";
            }
          });
        });
      }

      // Social Links Component
      function renderSocialLinks() {
        const container = document.getElementById("social-links");

        socialLinks.forEach((link) => {
          const a = document.createElement("a");
          a.href = link.href;
          a.target = "_blank";
          a.className =
            "text-blue-700 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300 transition-colors";
          a.innerHTML = `<i class="${link.icon}" aria-label="${link.label}"></i>`;
          container.appendChild(a);
        });
      }

      // About Content Component
      function renderAboutContent() {
        const container = document.getElementById("about-content");

        aboutParagraphs.forEach((paragraph) => {
          const p = document.createElement("p");
          p.innerHTML = paragraph;
          container.appendChild(p);
        });
      }

      // News Component
      function renderNews() {
        const newsList = document.getElementById("news-list");

        newsItems.forEach((item) => {
          const li = document.createElement("li");
          li.className = "flex gap-2 md:gap-3";
          li.innerHTML = `
            <span class="text-blue-600 dark:text-blue-400 mt-0.5 md:mt-1 flex-shrink-0"><i class="fa-solid fa-arrow-right"></i></span>
            <p><b>${item.date}:</b> ${item.content}</p>
          `;
          newsList.appendChild(li);
        });

        // Add the "more items" indicator
        const moreLi = document.createElement("li");
        moreLi.className =
          "text-xs text-gray-500 dark:text-gray-400 text-center pt-4";
        moreLi.textContent = "[以下省略]";
        newsList.appendChild(moreLi);
      }

      // Publications Component
      function renderPublications() {
        const papersContainer = document.getElementById("papers");

        publications.forEach((pub) => {
          const li = document.createElement("li");
          li.className =
            "paper group bg-gray-50 dark:bg-gray-700 border-l-4 border-gray-400 dark:border-gray-500 hover:border-blue-600 dark:hover:border-blue-400 hover:bg-blue-50 dark:hover:bg-gray-600 transition-all duration-300";

          const authorsHtml = pub.authors
            .map((author) =>
              author === "Kinan Martin" ? `<strong>${author}</strong>` : author,
            )
            .join(", ");

          li.innerHTML = `
            <a href="${pub.link}" target="_blank" class="block p-4 md:p-6">
              <div class="flex gap-2 md:gap-3">
                <span class="text-gray-600 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 mt-0.5 md:mt-1 flex-shrink-0">
                  <i class="fa-solid fa-arrow-up-right-from-square"></i>
                </span>
                <div class="flex-1 min-w-0">
                  <p class="font-bold text-base md:text-lg mb-2">${pub.title}</p>
                  <p class="text-xs md:text-sm text-gray-600 dark:text-gray-400 mb-2">${authorsHtml}</p>
                  <div class="flex flex-col sm:flex-row sm:justify-between text-xs md:text-sm gap-1 sm:gap-0">
                    <p class="italic text-gray-500 dark:text-gray-400">${pub.date}</p>
                    <p class="font-semibold">${pub.publisher}</p>
                  </div>
                </div>
              </div>
            </a>
          `;

          papersContainer.appendChild(li);
        });
      }

      // Languages Component
      function renderLanguages() {
        const container = document.getElementById("language-container");

        languagesData.forEach((lang) => {
          const div = document.createElement("div");
          div.className =
            "language group cursor-pointer bg-gray-50 dark:bg-gray-700 hover:bg-blue-50 dark:hover:bg-gray-600 border-2 border-gray-200 dark:border-gray-600 hover:border-blue-400 dark:hover:border-blue-500 rounded-xl p-3 md:p-4 text-center transition-all duration-300";
          div.innerHTML = `
            <span role="img" aria-label="${lang.english}" class="language-flag text-4xl md:text-5xl lg:text-6xl block mb-1 md:mb-2">${lang.flag}</span>
            <span class="native-name font-bold text-sm md:text-base lg:text-lg block group-hover:hidden">${lang.native}</span>
            <span class="english-name font-bold text-sm md:text-base lg:text-lg hidden group-hover:block text-blue-600 dark:text-blue-400">${lang.english}</span>
            <p class="text-xs md:text-sm italic mt-1">${lang.level}</p>
          `;
          container.appendChild(div);
        });

        // Add the "learning more" message
        const moreDiv = document.createElement("div");
        moreDiv.className =
          "col-span-2 md:col-span-3 lg:col-span-4 text-center pt-4";
        moreDiv.innerHTML =
          '<p class="text-base md:text-lg italic text-gray-600 dark:text-gray-400">...and always learning more!</p>';
        container.appendChild(moreDiv);

        // Apply Twemoji to language flags after they're rendered
        twemoji.parse(container, {
          folder: "svg",
          ext: ".svg",
          className: "emoji",
        });
      }

      // ==================== HELLO ANIMATION ====================

      const helloLanguages = [
        [
          "k",
          "こ",
          "こn",
          "こん",
          "こんn",
          "こんに",
          "こんにt",
          "こんにち",
          "こんにちh",
          "こんにちは",
          "こんにちは！",
          "こんにちは！🇯🇵",
        ],
        ["П", "Пр", "При", "Прив", "Приве", "Привет", "Привет!", "Привет! 🇷🇺"],
        ["S", "Sa", "Sal", "Salu", "Salut", "Salut ", "Salut !", "Salut ! 🇫🇷"],
        ["H", "He", "Hel", "Hell", "Hello", "Hello!", "Hello! 🇺🇸"],
        [
          "n",
          "ni",
          "你",
          "你h",
          "你ha",
          "你hao",
          "你好",
          "你好！",
          "你好！🇨🇳",
          "你好！🇨🇳🇹🇼",
        ],
        [
          "ا",
          "ال",
          "الس",
          "السل",
          "السلا",
          "السلام",
          "السلام ",
          "السلام ع",
          "السلام عل",
          "السلام علي",
          "السلام عليك",
          "السلام عليكم",
          "السلام عليكم!",
          "السلام عليكم! 🇸🇾",
        ],
        ["¡", "¡H", "¡Ho", "¡Hol", "¡Hola", "¡Hola!", "¡Hola! 🇨🇱"],
        [
          "ㅇ",
          "아",
          "안",
          "안ㄴ",
          "안녀",
          "안녕",
          "안녕ㅎ",
          "안녕하",
          "안녕핫",
          "안녕하세",
          "안녕하셍",
          "안녕하세요",
          "안녕하세요!",
          "안녕하세요! 🇰🇷",
        ],
        ["C", "Cz", "Cze", "Cześ", "Cześć", "Cześć!", "Cześć! 🇵🇱"],
        [
          "X",
          "Xi",
          "Xin",
          "Xin ",
          "Xin c",
          "Xin ch",
          "Xin cha",
          "Xin chao",
          "Xin chào",
          "Xin chào!",
          "Xin chào! 🇻🇳",
        ],
      ];

      const rtl_languages = [5];
      let cycleSpeed = 5000;
      let typeSpeed = 100;

      function typeText(id, index) {
        const text = helloLanguages[index];
        const textElement = document.getElementById(id);
        let i = 0;

        // Handle RTL languages
        if (rtl_languages.includes(index)) {
          textElement.classList.add("rtl-text");
        } else {
          textElement.classList.remove("rtl-text");
        }

        function typeNextCharacter() {
          if (i <= text.length) {
            let currentText;
            if (typeof text === "string") {
              currentText = text.slice(0, i);
            } else {
              currentText = text[i - 1] || "";
            }
            textElement.textContent = currentText;

            // Apply Twemoji to the hello text for flag emojis
            if (
              currentText.includes("🇯🇵") ||
              currentText.includes("🇷🇺") ||
              currentText.includes("🇫🇷") ||
              currentText.includes("🇺🇸") ||
              currentText.includes("🇨🇳") ||
              currentText.includes("🇹🇼") ||
              currentText.includes("🇸🇾") ||
              currentText.includes("🇨🇱") ||
              currentText.includes("🇰🇷") ||
              currentText.includes("🇵🇱") ||
              currentText.includes("🇻🇳")
            ) {
              twemoji.parse(textElement, {
                folder: "svg",
                ext: ".svg",
                className: "emoji",
              });
            }

            i++;
            setTimeout(typeNextCharacter, typeSpeed);
          }
        }

        typeNextCharacter();
      }

      let currentLanguageIndex = 0;

      function cycleText() {
        typeText("hello", currentLanguageIndex);
        currentLanguageIndex =
          (currentLanguageIndex + 1) % helloLanguages.length;
        setTimeout(cycleText, cycleSpeed);
      }

      // ==================== INITIALIZATION ====================

      document.addEventListener("DOMContentLoaded", function () {
        // Render all components
        renderNavigation();
        renderSocialLinks();
        renderAboutContent();
        renderNews();
        renderPublications();
        renderLanguages(); // This now includes Twemoji parsing

        // Start hello animation
        cycleText();

        // Apply Twemoji to any other emojis in the news section
        const newsSection = document.getElementById("news-list");
        if (newsSection) {
          twemoji.parse(newsSection, {
            folder: "svg",
            ext: ".svg",
            className: "emoji",
          });
        }

        // Language card click functionality
        document.querySelectorAll(".language").forEach(function (lang) {
          lang.addEventListener("click", function () {
            this.classList.toggle("active");
          });
        });
      });
    </script>
  </body>
</html>
